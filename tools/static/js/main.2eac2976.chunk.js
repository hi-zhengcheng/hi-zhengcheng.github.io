(this.webpackJsonpthree=this.webpackJsonpthree||[]).push([[0],{54:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(1),r=n.n(i),o=n(24),s=n.n(o),d=(n(54),n(2)),l=n(6),c=n(4),h=n(5),u=n(10),p=n(0),m=n(22),v=n(21),b=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).rootDiv=r.a.createRef(),a.controllerDiv=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e={speedX:0,speedY:0,speedZ:0,lightX:40,lightY:10,lightZ:40,materialColor:65280,texture:null,showTexture:!0},t=new p.Nb;t.setSize(window.innerWidth,window.innerHeight),this.rootDiv.appendChild(t.domElement);var n=new p.fb(75,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(2,1,10),n.lookAt(0,0,0);var a=new p.rb,i=new p.g(1,1,1),r=new p.T({color:e.materialColor});(new p.Db).load("./wall.jpg",(function(t){e.texture=t,e.showTexture&&(r.map=t,r.needsUpdate=!0)}));var o=new p.R(i,r);a.add(o);var s=new p.ib(16777215);s.position.set(e.lightX,e.lightY,e.lightZ),a.add(s);var d=new p.c(5);a.add(d);var l=new v.a(n,t.domElement);!function i(){requestAnimationFrame(i),l.update(),o.rotation.x+=e.speedX,o.rotation.y+=e.speedY,o.rotation.z+=e.speedZ,n.updateProjectionMatrix(),t.render(a,n)}();var c=new m.b.gui.GUI({autoPlace:!1}),h=c.addFolder("camera projection");h.add(n,"fov").min(30).max(120).step(5),h.open();var u=c.addFolder("light position");u.add(s.position,"x").min(-40).max(40).step(5),u.add(s.position,"y").min(-40).max(40).step(5),u.add(s.position,"z").min(-40).max(40).step(5),u.open();var b=c.addFolder("rotate speed");b.add(e,"speedX").min(0).max(.1).step(.005),b.add(e,"speedY").min(0).max(.1).step(.005),b.add(e,"speedZ").min(0).max(.1).step(.005),b.open();var w=c.addFolder("cube");w.addColor(e,"materialColor").name("color").onChange((function(){r.color.set(e.materialColor)})),w.add(r,"wireframe"),w.add(e,"showTexture").onChange((function(t){r.map=t?e.texture:null,r.needsUpdate=!0})),w.open();var f=c.addFolder("show axes");f.add(d,"visible"),f.open(),this.controllerDiv.append(c.domElement)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{position:"absolute",top:0},children:[Object(a.jsx)("div",{ref:function(t){return e.rootDiv=t}}),Object(a.jsx)("div",{ref:function(t){return e.controllerDiv=t},style:{position:"absolute",right:0,top:0}})]})}}]),n}(i.Component),w=n(27),f=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).rootDiv=r.a.createRef(),a.controllerDiv=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e={speedX:.001,speedY:.001,speedZ:0,lightX:40,lightY:10,lightZ:40,materialColor:16777215,texture:null,showTexture:!0},t=new p.Nb;t.setSize(window.innerWidth,window.innerHeight),this.rootDiv.appendChild(t.domElement);var n=new p.fb(45,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,1.5),n.lookAt(0,0,0);var a=new p.rb,i=new p.xb(.5,32,32),r=new p.V({color:e.materialColor});(new p.Db).load("./earth/2_no_clouds_8k.jpg",(function(t){e.texture=t,e.showTexture&&(r.map=t,r.needsUpdate=!0)}));var o=new p.R(i,r);a.add(o),a.add(new p.a(6710886));var s=new p.n(16777215,1);s.position.set(5,3,5),a.add(s);var d=new p.c(5);a.add(d);var l=new w.a(n,t.domElement);!function i(){requestAnimationFrame(i),l.update(),o.rotation.x+=e.speedX,o.rotation.y+=e.speedY,o.rotation.z+=e.speedZ,n.updateProjectionMatrix(),t.render(a,n)}();var c=new m.b.gui.GUI({autoPlace:!1}),h=c.addFolder("camera projection");h.add(n,"fov").min(30).max(120).step(5),h.open();var u=c.addFolder("light position");u.add(s.position,"x").min(-40).max(40).step(5),u.add(s.position,"y").min(-40).max(40).step(5),u.add(s.position,"z").min(-40).max(40).step(5),u.open();var v=c.addFolder("rotate speed");v.add(e,"speedX").min(0).max(.1).step(.005),v.add(e,"speedY").min(0).max(.1).step(.005),v.add(e,"speedZ").min(0).max(.1).step(.005),v.open();var b=c.addFolder("earth");b.addColor(e,"materialColor").name("color").onChange((function(){r.color.set(e.materialColor)})),b.add(r,"wireframe"),b.add(e,"showTexture").onChange((function(t){r.map=t?e.texture:null,r.needsUpdate=!0})),b.open();var f=c.addFolder("show axes");f.add(d,"visible"),f.open(),this.controllerDiv.append(c.domElement)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{position:"absolute",top:0},children:[Object(a.jsx)("div",{ref:function(t){return e.rootDiv=t}}),Object(a.jsx)("div",{ref:function(t){return e.controllerDiv=t},style:{position:"absolute",right:0,top:0}})]})}}]),n}(i.Component),g=n(35),j=n(43),x=n(11),y=n(30),O=n(79),_=n(80),C=n(81),k=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={height:window.innerHeight-16},a.onResize=a.onResize.bind(Object(x.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.bindedListener=this.onResize.bind(this),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.setState({height:window.innerHeight-16})}},{key:"render",value:function(){var e,t=[],n=Object(j.a)([{path:"/cube",primary:"Cube"},{path:"/earth",primary:"Earth"},{path:"/airplane",primary:"Airplane"},{path:"/pointcloud",primary:"Pointcloud"},{path:"/globe",primary:"Globe"},{path:"/skybox",primary:"SkyBox"},{path:"/gltfmodel",primary:"gltf Model"},{path:"/morphtargets",primary:"morph targets"}].entries());try{for(n.s();!(e=n.n()).done;){var i=Object(g.a)(e.value,2),r=i[0],o=i[1];t.push(Object(a.jsx)(_.a,{button:!0,component:y.b,to:o.path,children:Object(a.jsx)(C.a,{primary:o.primary})},r))}}catch(s){n.e(s)}finally{n.f()}return Object(a.jsx)(O.a,{component:"nav","aria-label":"secondary mailbox folders",style:{height:this.state.height,overflow:"auto"},children:t})}}]),n}(i.Component),R=n(44),z=n(40),D=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).rootDiv=null,a.controllerDiv=null,a.currentObj3d=null,a.materials=null,a.scene=null,a.renderer=null,a.directLight=null,a.ambientLight=null,a.paramObj={scale:1,translateX:0,translateY:0,translateZ:0,bg_color:16777215,direct_light_color:16777215,ambient_light_color:1123942},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=new p.Nb;e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(this.paramObj.bg_color,1),this.rootDiv.appendChild(e.domElement),this.renderer=e;var t=new p.fb(45,window.innerWidth/window.innerHeight,.1,1e4);t.position.set(10,5,1e3),t.lookAt(0,0,0);var n=new p.rb;this.scene=n,(new R.a).load("./modelnet40/airplane_0726_SMPL.mtl",function(e){this.materials=e,e.preload(),(new z.a).setMaterials(e).load("./modelnet40/airplane_0726_SMPL.obj",function(e){e.scale.set(this.paramObj.scale,this.paramObj.scale,this.paramObj.scale),e.position.set(this.paramObj.translateX,this.paramObj.translateY,this.paramObj.translateZ),this.scene.add(e),this.currentObj3d=e}.bind(this))}.bind(this));var a=new p.a(this.paramObj.ambient_light_color);n.add(a),this.ambientLight=a;var i=new p.n(this.paramObj.direct_light_color,1);i.position.set(5,3,5),n.add(i),this.directLight=i;var r=new p.c(2e3);n.add(r);var o=new w.a(t,e.domElement);!function a(){requestAnimationFrame(a),o.update(),t.updateProjectionMatrix(),e.render(n,t)}();var s=new m.b.gui.GUI({autoPlace:!1});s.addColor(this.paramObj,"bg_color").name("bg color").onChange(function(e){this.renderer.setClearColor(e,1)}.bind(this)),s.addColor(this.paramObj,"ambient_light_color").name("ambient").onChange(function(e){this.ambientLight.color.set(e)}.bind(this));var d=s.addFolder("camera projection");d.add(t,"fov").min(30).max(120).step(5),d.open();var l=s.addFolder("light position");l.add(i.position,"x").min(-40).max(40).step(5),l.add(i.position,"y").min(-40).max(40).step(5),l.add(i.position,"z").min(-40).max(40).step(5),l.addColor(this.paramObj,"direct_light_color").name("color").onChange(function(e){this.directLight.color.set(e)}.bind(this)),l.open();var c=s.addFolder("object");c.add(this.paramObj,"scale").min(.001).max(10).step(.001).onChange(function(e){this.currentObj3d&&this.currentObj3d.scale.set(e,e,e)}.bind(this)),c.add(this.paramObj,"translateX").min(-1e3).max(1e3).step(1).onChange(function(e){this.currentObj3d&&this.currentObj3d.position.setX(e)}.bind(this)),c.add(this.paramObj,"translateY").min(-1e3).max(1e3).step(1).onChange(function(e){this.currentObj3d&&this.currentObj3d.position.setY(e)}.bind(this)),c.add(this.paramObj,"translateZ").min(-1e3).max(1e3).step(1).onChange(function(e){this.currentObj3d&&this.currentObj3d.position.setZ(e)}.bind(this)),c.open();var h=s.addFolder("axes");h.add(r,"visible"),h.open();var u=s.addFolder("upload"),v={loadFile:function(){document.getElementById("uploadButton").click()}};u.add(v,"loadFile").name("Load obj file"),u.open(),this.controllerDiv.append(s.domElement)}},{key:"newFileCallback",value:function(){var e=this,t=document.getElementById("uploadButton").files[0],n=new FileReader;n.addEventListener("load",(function(t){var n=t.target.result,a=(new z.a).setMaterials(e.materials).parse(n);a?(a.scale.set(e.paramObj.scale,e.paramObj.scale,e.paramObj.scale),a.position.set(e.paramObj.translateX,e.paramObj.translateY,e.paramObj.translateZ),e.scene.add(a),e.scene.remove(e.currentObj3d),e.currentObj3d=a,alert("success")):alert("Load error")}),!1),n.readAsText(t)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{position:"absolute",top:0},children:[Object(a.jsx)("div",{ref:function(t){return e.rootDiv=t}}),Object(a.jsx)("div",{ref:function(t){return e.controllerDiv=t},style:{position:"absolute",right:0,top:0}}),Object(a.jsx)("input",{id:"uploadButton",type:"file",style:{visibility:"hidden"},onChange:this.newFileCallback.bind(this)})]})}}]),n}(i.Component),q=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).updateDimensions=function(){a.renderer.setSize(window.innerWidth,window.innerHeight),a.camera.aspect=window.innerWidth/window.innerHeight},a.rootDiv=null,a.controllerDiv=null,a.geometry=null,a.material=null,a.current_obj=null,a.scene=null,a.renderer=null,a.camera=null,a.paramObj={bg_color:0,camera_x:2,camera_y:5,camera_z:5,camera_rotate_x:0,camera_rotate_y:0,camera_rotate_z:0,camera_look_at_x:0,camera_look_at_y:0,camera_look_at_z:0,point_radius:.004,materialColor:4286945,scale:1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new p.Nb;t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(this.paramObj.bg_color,1),this.rootDiv.appendChild(t.domElement),this.renderer=t;var n=new p.fb(45,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(2,5,this.paramObj.camera_z),n.lookAt(0,0,0),this.camera=n;var a=new p.rb;this.scene=a,this.geometry=new p.u(this.paramObj.point_radius,3),this.material=new p.U({color:this.paramObj.materialColor}),this.material.onBeforeCompile=function(e){var t=["attribute vec3 instanceColor;","varying vec3 vInstanceColor;","uniform vec3 scaling;","#include <common>"].join("\n"),n=["#include <begin_vertex>","\tvInstanceColor = instanceColor;"].join("\n"),a=["varying vec3 vInstanceColor;","#include <common>"].join("\n"),i=["vec4 diffuseColor = vec4( diffuse * vInstanceColor, opacity );"].join("\n");e.vertexShader=e.vertexShader.replace("#include <common>",t).replace("#include <begin_vertex>",n),e.fragmentShader=e.fragmentShader.replace("#include <common>",a).replace("vec4 diffuseColor = vec4( diffuse, opacity );",i)},a.add(new p.a(16777215));var i=new p.c(2e3);a.add(i);var r=new w.a(n,t.domElement);r.addEventListener("change",(function(){e.paramObj.camera_x=e.camera.position.x,e.paramObj.camera_y=e.camera.position.y,e.paramObj.camera_z=e.camera.position.z,e.paramObj.camera_rotate_x=e.camera.rotation.x,e.paramObj.camera_rotate_y=e.camera.rotation.y,e.paramObj.camera_rotate_z=e.camera.rotation.z,e.paramObj.camera_look_at_x=r.target.x,e.paramObj.camera_look_at_y=r.target.y,e.paramObj.camera_look_at_z=r.target.z,d.updateDisplay(),l.updateDisplay(),c.updateDisplay()}));!function e(){requestAnimationFrame(e),r.update(),n.updateProjectionMatrix(),t.render(a,n)}(),fetch("./pointcloud/vase.txt").then((function(e){return e.text()})).then((function(t){var n=e.parseContent(t);e.showPointCloud(n)}));var o=new m.b.gui.GUI({autoPlace:!1}),s={log_camera_pos:function(){console.log(e.camera.position)},log_camera_lookAt:function(){console.log(r.target)},log_camera_rotate:function(){console.log(e.camera.rotation)}},d=o.addFolder("camera position");d.add(this.paramObj,"camera_x").step(1e-6).name("x").onChange(function(e){this.camera.position.setX(e)}.bind(this)),d.add(this.paramObj,"camera_y").step(1e-6).name("y").onChange(function(e){this.camera.position.setY(e)}.bind(this)),d.add(this.paramObj,"camera_z").step(1e-6).name("z").onChange(function(e){this.camera.position.setZ(e)}.bind(this)),d.add(s,"log_camera_pos"),d.open();var l=o.addFolder("camera rotation");l.add(this.paramObj,"camera_rotate_x").step(1e-6).name("x").onChange(function(e){this.camera.rotation.x=e}.bind(this)),l.add(this.paramObj,"camera_rotate_y").step(1e-6).name("y").onChange(function(e){this.camera.rotation.y=e}.bind(this)),l.add(this.paramObj,"camera_rotate_z").step(1e-6).name("z").onChange(function(e){this.camera.rotation.z=e}.bind(this)),l.add(s,"log_camera_rotate"),l.open();var c=o.addFolder("camera LookAt");c.add(this.paramObj,"camera_look_at_x").step(1e-6).name("x").onChange(function(e){r.target.setX(e)}.bind(this)),c.add(this.paramObj,"camera_look_at_y").step(1e-6).name("y").onChange(function(e){r.target.setY(e)}.bind(this)),c.add(this.paramObj,"camera_look_at_z").step(1e-6).name("z").onChange(function(e){r.target.setZ(e)}.bind(this)),l.add(s,"log_camera_lookAt"),c.open();var h=o.addFolder("object");h.addColor(this.paramObj,"materialColor").name("material color").onChange(function(e){this.material.color.set(e)}.bind(this)),h.addColor(this.paramObj,"bg_color").name("bg color").onChange(function(e){this.renderer.setClearColor(e,1)}.bind(this)),h.add(this.paramObj,"scale").name("point size").onChange(function(e){for(var t=new p.Q,n=new p.Ib,a=new p.mb,i=new p.Ib,r=0;r<this.current_obj.count;r++)this.current_obj.getMatrixAt(r,t),t.decompose(n,a,i),i.setScalar(e),t.compose(n,a,i),this.current_obj.setMatrixAt(r,t);this.current_obj.instanceMatrix.needsUpdate=!0}.bind(this)),h.open();var u=o.addFolder("axes");u.add(i,"visible"),u.open();var v=o.addFolder("upload"),b={loadFile:function(){document.getElementById("uploadButton").click()}};v.add(b,"loadFile").name("Load obj file"),v.open(),this.controllerDiv.append(o.domElement),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"loadtxt",value:function(e,t){var n=new FileReader;n.onload=function(e){var n=e.target.result,a=this.parseContent(n);t(a)}.bind(this),n.readAsText(e)}},{key:"showPointCloud",value:function(e){this.current_obj&&this.scene.remove(this.current_obj);for(var t=new p.x(this.geometry,this.material,e.length),n=new p.Q,a=[],i=0;i<e.length;i++)n.setPosition(e[i][0],e[i][1],e[i][2]),t.setMatrixAt(i,n),a.push(e[i][3]/255),a.push(e[i][4]/255),a.push(e[i][5]/255);this.geometry.setAttribute("instanceColor",new p.w(new Float32Array(a),3)),this.scene.add(t),this.current_obj=t}},{key:"parseContent",value:function(e){var t,n,a=e.split("\n"),i=a[0];if(t=this.parseLine(i)){n=t.length;for(var r,o,s,d,l,c,h,u,p,m,v,b,w=[],f=0;f<a.length;f++)(t=this.parseLine(a[f]))&&t.length===n&&w.push(t);r=w[0][0],o=w[0][1],s=w[0][2],d=w[0][0],l=w[0][1],c=w[0][2],h=0,u=0,p=0;for(var g=0;g<w.length;g++)r<w[g][0]&&(r=w[g][0]),d>w[g][0]&&(d=w[g][0]),h+=w[g][0],o<w[g][1]&&(o=w[g][1]),l>w[g][1]&&(l=w[g][1]),u+=w[g][1],s<w[g][2]&&(s=w[g][2]),c>w[g][2]&&(c=w[g][2]),p+=w[g][2];m=h/w.length,v=u/w.length,b=p/w.length;var j=r-d;j=(j=(j=j?j>=o-l:o-l)?j>=s-c:s-c)?j>0:1;for(var x=0;x<w.length;x++)w[x][0]=(w[x][0]-m)/j,w[x][1]=(w[x][1]-v)/j,w[x][2]=(w[x][2]-b)/j;return w}alert("Parse Error")}},{key:"parseLine",value:function(e){if(!e)return null;for(var t=[" ",",",", "],n=0;n<t.length;n++){var a=e.split(t[n]);if(3===a.length||6===a.length){for(var i=0;i<a.length;i++)a[i]=parseFloat(a[i]);for(i=a.length;i<6;i++)a.push(255);return a}}return null}},{key:"handlerFileSelected",value:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];this.loadtxt(t,this.showPointCloud.bind(this))}else alert("No file uploaded")}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{position:"absolute",top:0},children:[Object(a.jsx)("div",{ref:function(t){return e.rootDiv=t}}),Object(a.jsx)("div",{ref:function(t){return e.controllerDiv=t},style:{position:"absolute",right:0,top:0}}),Object(a.jsx)("input",{id:"uploadButton",type:"file",style:{visibility:"hidden"},onChange:this.handlerFileSelected.bind(this)})]})}}]),n}(i.Component),F=n(41),E=n.n(F),I=n(45),S=n(46),M=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).canvas2d=null,a.rootDiv=null,a.controllerDiv=null,a.scene=null,a.camera=null,a.renderer=null,a.controls=null,a.renderRequested=!1,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=new p.Nb;e.setSize(window.innerWidth,window.innerHeight),e.setClearColor("#000000",1),this.rootDiv.appendChild(e.domElement),this.renderer=e;var t=new p.rb;t.background=new p.l("black"),this.scene=t;var n=(new p.Db).load("./globe/world.jpg"),a=new p.wb(1,64,32),i=new p.S({map:n});t.add(new p.R(a,i));var r=new p.fb(60,window.innerWidth/window.innerHeight,.1,10);r.position.set(0,0,2.5),r.lookAt(0,0,0),this.camera=r;var o=new v.a(r,e.domElement);o.enableDamping=!0,o.enablePan=!1,o.minDistance=1.2,o.maxDistance=4,o.update(),this.controls=o,this.loadFile("./globe/gpw_v4_basic_demographic_characteristics_rev10_a000_014mt_2010_cntm_1_deg.asc").then(this.parseData.bind(this)).then(this.addBoxes.bind(this)).then(this.render_3d.bind(this)),o.addEventListener("change",this.requestRenderIfNotRequested.bind(this)),window.addEventListener("resize",this.requestRenderIfNotRequested.bind(this))}},{key:"render_3d",value:function(){this.renderRequested=!1,this.resizeRendererToDisplaySize()&&(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()),this.controls.update(),this.renderer.render(this.scene,this.camera)}},{key:"resizeRendererToDisplaySize",value:function(){var e=this.renderer.domElement,t=e.style.width!==window.innerWidth||e.style.height!==window.innerHeight;return t&&(e.style.width=this.px(window.innerWidth),e.style.height=this.px(window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight,!1)),t}},{key:"requestRenderIfNotRequested",value:function(){this.renderRequested||(this.renderRequested=!0,requestAnimationFrame(this.render_3d.bind(this)))}},{key:"loadFile",value:function(){var e=Object(I.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.text());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseData",value:function(e){var t,n,a=[],i={data:a};return e.split("\n").forEach((function(e){var r=e.trim().split(/\s+/);if(2===r.length)i[r[0]]=parseFloat(r[1]);else if(r.length>2){var o=r.map((function(e){var a=parseFloat(e);if(a!==i.NODATA_value)return t=Math.max(void 0===t?a:t,a),n=Math.min(void 0===n?a:n,a),a}));a.push(o)}})),Object.assign(i,{min:n,max:t})}},{key:"drawData",value:function(e){var t=this,n=e.min,a=e.max,i=e.ncols,r=e.nrows,o=e.data,s=a-n,d=this.canvas2d.getContext("2d");d.canvas.width=i,d.canvas.height=r,d.canvas.style.width=this.px(2*i),d.canvas.style.height=this.px(2*r),d.fillStyle="#444",d.fillRect(0,0,d.canvas.width,d.canvas.height),o.forEach((function(e,a){e.forEach((function(e,i){if(void 0!==e){var r=(e-n)/s;d.fillStyle=t.hsl(1,1,r),d.fillRect(i,a,1,1)}}))}))}},{key:"px",value:function(e){return"".concat(0|e,"px")}},{key:"hsl",value:function(e,t,n){return"hsl(".concat(360*e|0,",").concat(100*t|0,"%,").concat(100*n|0,"%)")}},{key:"addBoxes",value:function(e){var t=e.min,n=e.max,a=e.data,i=n-t,r=new p.db;this.scene.add(r);var o=new p.db;r.add(o);var s=new p.db;s.position.z=1,o.add(s);var d=new p.db;d.position.z=.5,s.add(d);var l=new p.l,c=.5*Math.PI,h=-.135*Math.PI,u=[];a.forEach((function(n,a){n.forEach((function(n,m){if(void 0!==n){var v=(n-t)/i,b=new p.f(1,1,1);r.rotation.y=p.O.degToRad(m+e.xllcorner)+c,o.rotation.x=p.O.degToRad(a+e.yllcorner)+h,s.scale.set(.005,.005,p.O.lerp(.01,.5,v)),d.updateWorldMatrix(!0,!1),b.applyMatrix4(d.matrixWorld);var w=p.O.lerp(.7,.3,v),f=p.O.lerp(.4,.1,v);l.setHSL(w,1,f);var g=l.toArray().map((function(e){return 255*e})),j=b.getAttribute("position").count,x=new Uint8Array(3*j);x.forEach((function(e,t){x[t]=g[t%3]}));var y=new p.h(x,3,!0);b.setAttribute("color",y),u.push(b)}}))}));var m=S.a.mergeBufferGeometries(u,!1),v=new p.S({vertexColors:p.Kb}),b=new p.R(m,v);this.scene.add(b)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{position:"absolute",top:0},children:[Object(a.jsx)("div",{ref:function(t){return e.rootDiv=t}}),Object(a.jsx)("div",{ref:function(t){return e.controllerDiv=t},style:{position:"absolute",right:0,top:0}})]})}}]),n}(i.Component),W=n(34),L=n(37),H=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).canvas=null,a.scene=null,a.camera=null,a.renderer=null,a.controls=null,a.renderRequested=!1,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new p.Nb({canvas:this.canvas,antialias:!0});t.autoClearColor=!1;var n=window.innerWidth||2,a=window.innerHeight||2,i=new L.a(t);i.setSize(n,a),this.renderer=i;var r=window.innerWidth/window.innerHeight,o=new p.fb(45,r,.001,1e3);o.position.set(0,0,10),this.camera=o;var s=new p.rb;this.scene=s;var d=new p.a(4210752,100);s.add(d);var l=new p.n(16777215,50);l.position.set(0,1,0),l.castShadow=!0,s.add(l);var c=new v.a(o,this.canvas);c.enableDamping=!0,c.enablePan=!1,c.update(),this.controls=c,this.render_3d(),c.addEventListener("change",this.requestRenderIfNotRequested.bind(this)),window.addEventListener("resize",this.requestRenderIfNotRequested.bind(this)),(new p.Db).load("https://threejsfundamentals.org/threejs/resources/images/equirectangularmaps/tears_of_steel_bridge_2k.jpg",(function(e){var n=new p.Lb(e.image.height);n.fromEquirectangularTexture(t,e),s.background=n}));(new W.a).load("./skybox/free_1972_datsun_240k_gt/scene.gltf",(function(t){var n=t.scene,a=n.children[0];a.scale.set(.5,.5,.5),s.add(a);var i=(new p.e).setFromObject(a),r=i.getSize(new p.Ib).length(),o=i.getCenter(new p.Ib);c.maxDistance=10*r,c.target.copy(o),n.traverse((function(e){(e.isMesh||e.isLight)&&(e.castShadow=!0)})),e.requestRenderIfNotRequested()}))}},{key:"requestRenderIfNotRequested",value:function(){this.renderRequested||(this.renderRequested=!0,requestAnimationFrame(this.render_3d.bind(this)))}},{key:"frameArea",value:function(e,t,n,a){var i=.5*e,r=p.O.degToRad(.5*a.fov),o=i/Math.tan(r),s=(new p.Ib).subVectors(a.position,n).multiply(new p.Ib(1,0,1)).normalize();this.camera.position.copy(s.multiplyScalar(o).add(n)),this.camera.near=t/100,this.camera.far=100*t,this.camera.updateProjectionMatrix(),this.camera.lookAt(n.x,n.y,n.z)}},{key:"render_3d",value:function(){this.renderRequested=!1,this.resizeRendererToDisplaySize()&&(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()),this.controls.update(),this.renderer.render(this.scene,this.camera)}},{key:"resizeRendererToDisplaySize",value:function(){var e=this.canvas,t=e.style.width!==window.innerWidth||e.style.height!==window.innerHeight;return t&&(e.style.width=this.px(window.innerWidth),e.style.height=this.px(window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight,!1)),t}},{key:"px",value:function(e){return"".concat(0|e,"px")}},{key:"render",value:function(){var e=this;return Object(a.jsx)("canvas",{ref:function(t){return e.canvas=t}})}}]),n}(i.Component),A=n(47),P=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).canvas=null,a.scene=null,a.camera=null,a.renderer=null,a.controls=null,a.renderRequested=!1,a.requestRenderIfNotRequested=a.requestRenderIfNotRequested.bind(Object(x.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new p.Nb({canvas:this.canvas,antialias:!0});this.renderer=t;var n=new A.a(t);n.setEyeSeparation(.1),this.renderer=n;var a=window.innerWidth/window.innerHeight,i=new p.fb(45,a,.001,1e3);i.position.set(0,4,10),this.camera=i;var r=new p.rb;this.scene=r;var o=new p.c(100);r.add(o);var s=new p.a(16777215,1);r.add(s);var d=new v.a(i,this.canvas);d.enableDamping=!0,d.enablePan=!1,d.target=new p.Ib(0,4,0),d.update(),this.controls=d;var l=new p.g(100,.2,100),c=new p.S({color:6062230});c.wireframe=!0;var h=new p.R(l,c);h.position.setY(-.1),r.add(h),(new p.Db).load("./skybox/blue-sky.jpg",(function(e){var t=new p.hb(300,300);t.translate(0,0,-100);var n=new p.S({map:e}),a=new p.R(t,n);a.rotateX(Math.PI/20),r.add(a)})),this.render_3d(),d.addEventListener("change",this.requestRenderIfNotRequested),window.addEventListener("resize",this.requestRenderIfNotRequested);(new W.a).load("./skybox/figurehead-of-hms-prince-of-wales-3d-model/scene.gltf",(function(t){var n=t.scene;r.add(n);var a=(new p.e).setFromObject(n),i=a.getCenter(new p.Ib);n.translateX(-i.x),n.translateY(-i.y+a.max.sub(a.min).y/2),n.translateZ(-i.z),n.rotateY(-Math.PI/4),e.requestRenderIfNotRequested()}))}},{key:"componentWillUnmount",value:function(){this.controls.removeEventListener("change",this.requestRenderIfNotRequested),window.removeEventListener("resize",this.requestRenderIfNotRequested)}},{key:"requestRenderIfNotRequested",value:function(){this.renderRequested||(this.renderRequested=!0,requestAnimationFrame(this.render_3d.bind(this)))}},{key:"render_3d",value:function(){this.renderRequested=!1,this.resizeRendererToDisplaySize()&&(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()),this.controls.update(),this.renderer.render(this.scene,this.camera)}},{key:"resizeRendererToDisplaySize",value:function(){var e=this.canvas,t=e.style.width!==window.innerWidth||e.style.height!==window.innerHeight;return t&&(e.style.width=this.px(window.innerWidth),e.style.height=this.px(window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight,!1)),t}},{key:"px",value:function(e){return"".concat(0|e,"px")}},{key:"render",value:function(){var e=this;return Object(a.jsx)("canvas",{ref:function(t){return e.canvas=t}})}}]),n}(i.Component),T=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).rootDiv=null,a.controllerDiv=null,a.mesh=null,a.camera=null,a.renderer=null,a.onWindowResize=a.onWindowResize.bind(Object(x.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=new p.rb;e.background=new p.l(9419988);var t=new p.fb(45,window.innerWidth/window.innerHeight,1,20);t.position.z=10,this.camera=t,e.add(t),e.add(new p.a(9419988,.4));var n=new p.ib(16777215,1);t.add(n);var a=this.createGeometry(),i=new p.V({color:16711680,flatShading:!0,morphTargets:!0}),r=new p.R(a,i);this.mesh=r,this.mesh.morphTargetInfluences=[0],e.add(r);var o=new p.Nb({antialias:!0});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(window.devicePixelRatio),o.setAnimationLoop((function(){o.render(e,t)})),this.renderer=o,this.rootDiv.appendChild(o.domElement),new v.a(t,o.domElement).enableZoom=!1,this.initGUI(),window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"createGeometry",value:function(){for(var e=new p.g(2,2,2,32,32,32),t=[],n=0;n<e.vertices.length;n++){var a=e.vertices[n].x,i=e.vertices[n].y,r=e.vertices[n].z;t.push(new p.Ib(a/Math.sqrt(a*a+i*i+r*r),i/Math.sqrt(a*a+i*i+r*r),r/Math.sqrt(a*a+i*i+r*r)))}return e.morphTargets[0]={name:"t1",vertices:t},e.computeMorphNormals(),e}},{key:"initGUI",value:function(){var e=this,t=new m.a,n=t.addFolder("Morph Targets");n.add({spherify:0},"spherify",0,1).step(.01).onChange((function(t){e.mesh.morphTargetInfluences[0]=t})),n.open(),this.controllerDiv.append(t.domElement)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{position:"absolute",top:0},children:[Object(a.jsx)("div",{ref:function(t){e.rootDiv=t}}),Object(a.jsx)("div",{ref:function(t){e.controllerDiv=t},style:{position:"absolute",right:0,top:0}})]})}}]),n}(i.Component),N=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:"/",component:k}),Object(a.jsx)(u.a,{path:"/cube",component:b}),Object(a.jsx)(u.a,{path:"/earth",component:f}),Object(a.jsx)(u.a,{path:"/airplane",component:D}),Object(a.jsx)(u.a,{path:"/pointcloud",component:q}),Object(a.jsx)(u.a,{path:"/globe",component:M}),Object(a.jsx)(u.a,{path:"/skybox",component:H}),Object(a.jsx)(u.a,{path:"/gltfmodel",component:P}),Object(a.jsx)(u.a,{path:"/morphtargets",component:T})]})})}}]),n}(i.Component),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(y.a,{basename:window.location.pathname,children:Object(a.jsx)(N,{})})}),document.getElementById("root")),Y()}},[[61,1,2]]]);