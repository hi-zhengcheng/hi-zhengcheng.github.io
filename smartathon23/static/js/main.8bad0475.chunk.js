(this.webpackJsonpthree=this.webpackJsonpthree||[]).push([[0],{43:function(e,t,i){},45:function(e,t,i){},58:function(e,t,i){},64:function(e,t,i){},65:function(e,t,i){},68:function(e,t,i){},69:function(e,t,i){},70:function(e,t,i){"use strict";i.r(t);var n=i(2),a=i(0),r=i.n(a),s=i(9),o=i.n(s),c=(i(58),i(8)),l=i(5),d=i(14),h=i(13),b=i(10),j=i(20),x=(i(43),i(30)),p=i(99),u=Object(x.a)({root:{backgroundColor:"#166780",color:"white","&:hover":{backgroundColor:"#7BC142",color:"white"},borderRadius:16}})(p.a),g=Object(x.a)({root:{backgroundColor:"#166780","&:hover":{backgroundColor:"#7BC142"},borderRadius:16}})(p.a),f=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){return Object(c.a)(this,i),t.call(this,e)}return Object(l.a)(i,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"root",children:[Object(n.jsx)("h1",{children:"Member Login"}),Object(n.jsx)(u,{component:j.b,to:"/operator",size:"large",variant:"contained",color:"primary",style:{textTransform:"none",margin:"16px",minWidth:"200px"},children:"Operator"}),Object(n.jsx)(u,{component:j.b,to:"/worker",size:"large",variant:"contained",color:"primary",style:{textTransform:"none",margin:"16px",minWidth:"200px"},children:"worker"})]})}}]),i}(a.Component),m=(i(45),function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"setSelectedImgIdx",value:function(e){this.selectedImgIdx=e}}]),e}());m.imgList=["99a6e3e8eea5c7d137fb239b9f7f42fa.jpg","98e2a0cb28f1f6bd3dc03bbb4871a569.jpg","98b2ebb8eff0ac1b5480a5e34dfd541d.jpg"],m.bbxList=[[["GARBAGE",1386,484,196,142,1920,1080],["GARBAGE",1526,498,268,128,,1920,1080]],[["CONSTRUCTION_ROAD",1330,276,420,208,1920,1080],["CONSTRUCTION_ROAD",946,296,288,188,1920,1080],["CONSTRUCTION_ROAD",688,284,370,238,1920,1080],["CONSTRUCTION_ROAD",0,182,694,460,1920,1080],["CONSTRUCTION_ROAD",410,310,486,248,1920,1080],["GARBAGE",1738,394,130,114,1920,1080]],[["POTHOLES",842,470,166,196,1920,1080],["POTHOLES",772,564,248,468,1920,1080]]],m.selectedImgIdx=-1;var O=m,v=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).state={idx:0},O.setSelectedImgIdx(n.state.idx),n}return Object(l.a)(i,[{key:"click_retake",value:function(){var e=(this.state.idx+1)%O.imgList.length;O.setSelectedImgIdx(e),this.setState({idx:e})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"root",children:[Object(n.jsx)("h1",{children:"Use sample image"}),Object(n.jsx)("img",{style:{maxWidth:"min(100%, 1000px)",height:"auto"},src:"./imgs/".concat(O.imgList[this.state.idx])}),Object(n.jsx)(u,{size:"large",variant:"contained",color:"primary",style:{textTransform:"none",marginTop:"32px",width:"100%",maxWidth:"500px"},onClick:function(){e.click_retake()},children:"Try another image"}),Object(n.jsx)(g,{component:j.b,to:"/detect-result",size:"large",variant:"contained",color:"primary",style:{textTransform:"none",marginTop:"32px",width:"100%",maxWidth:"500px"},children:"Next"})]})}}]),i}(a.Component),y=i(26),k=i(95),T=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).canvasRef=r.a.createRef(),n.imgRef=r.a.createRef(),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this.canvasRef.current.getContext("2d"),t=this.imgRef.current;t.onload=function(){e.drawImage(t,0,0);for(var i=O.bbxList[O.selectedImgIdx],n=0;n<i.length;n++){var a=i[n],r=a[0];console.log(a),e.beginPath(),e.lineWidth="3",e.strokeStyle="#eb612dff",e.rect(a[1],a[2],a[3],a[4]),e.font="20px Arial";var s=e.measureText(r);e.fillStyle="black",e.fillRect(a[1],a[2],s.width+6,parseInt(e.font,10)+6),e.fillStyle="white",e.fillText(r,a[1]+2,a[2]+20),e.stroke()}}}},{key:"render",value:function(){for(var e=O.bbxList[O.selectedImgIdx],t={},i=0;i<e.length;i++)e[i][0]in t?t[e[i][0]]+=1:t[e[i][0]]=1;for(var a=[],r=0,s=Object.entries(t);r<s.length;r++){var o=Object(y.a)(s[r],2),c=o[0],l=o[1];a.push(Object(n.jsxs)("li",{children:[c,": ",l]},c))}return Object(n.jsxs)("div",{className:"root",children:[Object(n.jsx)("h1",{children:"Detection Result"}),Object(n.jsx)("canvas",{ref:this.canvasRef,width:1920,height:1080,style:{maxWidth:"min(100%, 1000px)",height:"auto"}}),Object(n.jsx)("img",{ref:this.imgRef,style:{maxWidth:"100%",height:"auto",display:"none"},src:"./imgs/".concat(O.imgList[O.selectedImgIdx])}),Object(n.jsx)(k.a,{square:!0,elevation:3,style:{margin:"32px",textAlign:"left",width:"100%"},children:Object(n.jsxs)("div",{style:{padding:"16px"},children:[Object(n.jsx)("h3",{children:"Type of pollution:"}),Object(n.jsx)("ul",{style:{textAlign:"left"},children:a})]})}),Object(n.jsx)(u,{component:j.b,to:"/submit-success",size:"large",variant:"contained",color:"primary",style:{textTransform:"none",width:"100%",maxWidth:"500px"},children:"Submit to GreenHawk"})]})}}]),i}(a.Component),C=i(16),L=(i(64),i(65),i(42)),w=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).canvasRef=r.a.createRef(),n.imgRef=r.a.createRef(),n.snackbarRef=r.a.createRef(),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.canvasRef.current.getContext("2d"),i=this.imgRef.current;i.onload=function(){t.drawImage(i,0,0);for(var n=e.props.bbx,a=0;a<n.length;a++){var r=n[a],s=r[0];console.log(r),t.beginPath(),t.lineWidth="3",t.strokeStyle="#eb612dff",t.rect(r[1],r[2],r[3],r[4]),t.font="20px Arial";var o=t.measureText(s);t.fillStyle="black",t.fillRect(r[1],r[2],o.width+6,parseInt(t.font,10)+6),t.fillStyle="white",t.fillText(s,r[1]+2,r[2]+20),t.stroke()}}}},{key:"render",value:function(){for(var e=this,t=this.props.bbx,i={},a=0;a<t.length;a++)t[a][0]in i?i[t[a][0]]+=1:i[t[a][0]]=1;for(var r=[],s=0,o=Object.entries(i);s<o.length;s++){var c=Object(y.a)(o[s],2),l=c[0],d=c[1];r.push(Object(n.jsxs)("li",{children:[l,": ",d]},l))}return Object(n.jsxs)(k.a,{square:!0,elevation:5,style:{padding:"16px",marginTop:"32px"},children:[Object(n.jsx)(L.BrowserView,{children:Object(n.jsxs)("div",{className:"worker_item_root",children:[Object(n.jsxs)("div",{className:"worker_item_row",children:[Object(n.jsx)("canvas",{ref:this.canvasRef,width:1920,height:1080,style:{width:"40%",height:"auto"}}),Object(n.jsx)("img",{ref:this.imgRef,src:this.props.img,style:{display:"none"}}),Object(n.jsxs)("div",{style:{width:"40%",textAlign:"left",marginLeft:"24px"},children:[Object(n.jsx)("div",{style:{fontWeight:"bold"},children:"Pollution Type"}),Object(n.jsx)("div",{style:{marginTop:"-8px"},children:Object(n.jsx)("ul",{style:{paddingLeft:"24px"},children:r})}),Object(n.jsx)("div",{style:{fontWeight:"bold"},children:"Location"}),Object(n.jsx)("div",{style:{marginTop:"8px",marginLeft:"12px"},children:"Coming later..."})]})]}),Object(n.jsxs)("div",{style:{marginTop:"32px"},children:[Object(n.jsx)(u,{size:"large",variant:"contained",color:"secondary",style:{textTransform:"none",marginRight:"16px"},onClick:function(){e.props.false_report_handler()},children:"False Report"}),Object(n.jsx)(g,{size:"large",variant:"contained",color:"primary",style:{textTransform:"none"},onClick:function(){e.props.send_handler()},children:this.props.btnText2})]})]})}),Object(n.jsxs)(L.MobileView,{children:[Object(n.jsx)("canvas",{ref:this.canvasRef,width:1920,height:1080,style:{width:"100%",height:"auto"}}),Object(n.jsx)("img",{ref:this.imgRef,src:this.props.img,style:{display:"none"}}),Object(n.jsxs)("div",{style:{width:"100%",textAlign:"left"},children:[Object(n.jsx)("div",{style:{fontWeight:"bold"},children:"Pollution Type"}),Object(n.jsx)("div",{style:{marginTop:"-8px"},children:Object(n.jsx)("ul",{style:{paddingLeft:"24px"},children:r})}),Object(n.jsx)("div",{style:{fontWeight:"bold"},children:"Location"}),Object(n.jsx)("div",{style:{marginTop:"8px",marginLeft:"12px"},children:"Coming later..."})]}),Object(n.jsx)(u,{size:"large",variant:"contained",color:"secondary",style:{textTransform:"none",width:"100%",marginTop:"24px",marginBottom:"16px"},onClick:function(){e.props.false_report_handler()},children:"False Report"}),Object(n.jsx)(g,{size:"large",variant:"contained",color:"primary",style:{textTransform:"none",width:"100%"},onClick:function(){e.props.send_handler()},children:this.props.btnText2})]})]})}}]),i}(a.Component),R=i(101),S=i(100),I=i(98),_=i(96),N=i(102),A=i(97),D=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).state={imgList:O.imgList.slice(),bbxList:O.bbxList.slice(),dialogOpen:!1,dialogMsg:""},n}return Object(l.a)(i,[{key:"clickFalseReport",value:function(e){this.openDialog("Report marked as a false alarm. Thank you for confirmation"),this.setState({imgList:this.state.imgList.filter((function(t,i){return e!==i})),bbxList:this.state.bbxList.filter((function(t,i){return e!==i}))})}},{key:"clickSend",value:function(e){this.openDialog("Report sent to workers for handling it. Thank you for confirmation"),this.setState({imgList:this.state.imgList.filter((function(t,i){return e!==i})),bbxList:this.state.bbxList.filter((function(t,i){return e!==i}))})}},{key:"openDialog",value:function(e){this.setState(Object(C.a)(Object(C.a)({},this.state),{},{dialogMsg:e,dialogOpen:!0}))}},{key:"handleClose",value:function(){this.setState(Object(C.a)(Object(C.a)({},this.state),{},{dialogOpen:!1}))}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"worker_root",children:[Object(n.jsx)("h1",{children:"Operator Homepage"}),Object(n.jsx)(R.a,{component:"div",children:this.state.imgList.map((function(t,i){return Object(n.jsx)(S.a,{timeout:500,classNames:"worker_item",children:Object(n.jsx)("div",{children:Object(n.jsx)(w,{bbx:e.state.bbxList[i],img:"./imgs/"+e.state.imgList[i],date:"2013-01-10, 10:10:12",loc:"KAUST",false_report_handler:function(){e.clickFalseReport(i)},send_handler:function(){e.clickSend(i)},btnText2:"Send to workers"})})},e.state.imgList[i])}))}),0===this.state.imgList.length&&Object(n.jsx)("div",{style:{marginTop:"32px"},children:"All pollution reports were handled \ud83d\ude00. New reports will appear here"}),Object(n.jsxs)(I.a,{open:this.state.dialogOpen,onClose:function(){e.handleClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(_.a,{children:Object(n.jsx)(N.a,{id:"alert-dialog-description",children:this.state.dialogMsg})}),Object(n.jsx)(A.a,{children:Object(n.jsx)(p.a,{variant:"text",color:"primary",onClick:function(){e.handleClose()},autoFocus:!0,children:"Close"})})]})]})}}]),i}(a.Component),W=(i(68),function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).state={imgList:O.imgList.slice(),bbxList:O.bbxList.slice(),dialogOpen:!1,dialogMsg:""},n}return Object(l.a)(i,[{key:"clickFalseReport",value:function(e){this.openDialog("Report marked as a false alarm. Thanks you for confirmation."),this.setState({imgList:this.state.imgList.filter((function(t,i){return e!==i})),bbxList:this.state.bbxList.filter((function(t,i){return e!==i}))})}},{key:"clickSend",value:function(e){this.openDialog('Report status updated to "fixed". Thanks you for collaboration.'),this.setState({imgList:this.state.imgList.filter((function(t,i){return e!==i})),bbxList:this.state.bbxList.filter((function(t,i){return e!==i}))})}},{key:"openDialog",value:function(e){this.setState(Object(C.a)(Object(C.a)({},this.state),{},{dialogMsg:e,dialogOpen:!0}))}},{key:"handleClose",value:function(){this.setState(Object(C.a)(Object(C.a)({},this.state),{},{dialogOpen:!1}))}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"worker_root",children:[Object(n.jsx)("h1",{children:"Worker Homepage"}),Object(n.jsx)(R.a,{component:"div",children:this.state.imgList.map((function(t,i){return Object(n.jsx)(S.a,{timeout:500,classNames:"worker_item",children:Object(n.jsx)("div",{children:Object(n.jsx)(w,{bbx:e.state.bbxList[i],img:"./imgs/"+e.state.imgList[i],date:"2013-01-10, 10:10:12",loc:"KAUST",false_report_handler:function(){e.clickFalseReport(i)},send_handler:function(){e.clickSend(i)},btnText2:"Fixed"})})},e.state.imgList[i])}))}),0===this.state.imgList.length&&Object(n.jsx)("div",{style:{marginTop:"32px"},children:"All pollution reports were handled \ud83d\ude00. New reports will appear here"}),Object(n.jsxs)(I.a,{open:this.state.dialogOpen,onClose:function(){e.handleClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(_.a,{children:Object(n.jsx)(N.a,{id:"alert-dialog-description",children:this.state.dialogMsg})}),Object(n.jsx)(A.a,{children:Object(n.jsx)(p.a,{variant:"text",color:"primary",onClick:function(){e.handleClose()},autoFocus:!0,children:"Close"})})]})]})}}]),i}(a.Component)),F=(i(69),function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).state={dialogOpen:!1,dialogMsg:""},n}return Object(l.a)(i,[{key:"openDialog",value:function(e){this.setState(Object(C.a)(Object(C.a)({},this.state),{},{dialogMsg:e,dialogOpen:!0}))}},{key:"handleClose",value:function(){this.setState(Object(C.a)(Object(C.a)({},this.state),{},{dialogOpen:!1}))}},{key:"clickTakeImage",value:function(){this.openDialog("Sorry this feature is not working yet for this demo. You can try one of the example images taken by inspection vehicles")}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"user_root",children:[Object(n.jsx)("h1",{children:"User Homepage"}),Object(n.jsx)(u,{size:"large",variant:"contained",color:"primary",component:j.b,to:"/public",style:{textTransform:"none",marginTop:"32px",width:"100%",maxWidth:"500px"},children:"Use sample image"}),Object(n.jsx)(g,{size:"large",variant:"contained",color:"secondary",style:{textTransform:"none",marginTop:"32px",width:"100%",maxWidth:"500px"},onClick:function(){e.clickTakeImage()},children:"Take an image"}),Object(n.jsxs)(I.a,{open:this.state.dialogOpen,onClose:function(){e.handleClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(_.a,{children:Object(n.jsx)(N.a,{id:"alert-dialog-description",children:this.state.dialogMsg})}),Object(n.jsx)(A.a,{children:Object(n.jsx)(p.a,{variant:"text",color:"primary",onClick:function(){e.handleClose()},autoFocus:!0,children:"Close"})})]})]})}}]),i}(a.Component)),M=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){return Object(c.a)(this,i),t.call(this,e)}return Object(l.a)(i,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"root",children:[Object(n.jsx)("h1",{children:"Submit to GreenHawk Successfully \ud83c\udf89"}),Object(n.jsx)("div",{style:{marginTop:"32px"},children:"Thank you for helping us keep our city green! Stay safe and green."}),Object(n.jsx)(u,{href:"index.html",size:"large",variant:"contained",color:"primary",style:{textTransform:"none",margin:"48px"},children:"Go to homepage"})]})}}]),i}(a.Component),z=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(l.a)(i,[{key:"render",value:function(){return Object(n.jsx)("div",{style:{height:"100vh",overflow:"auto"},children:Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{exact:!0,path:"/",component:f}),Object(n.jsx)(b.a,{exact:!0,path:"/login",component:f}),Object(n.jsx)(b.a,{exact:!0,path:"/public",component:v}),Object(n.jsx)(b.a,{exact:!0,path:"/detect-result",component:T}),Object(n.jsx)(b.a,{exact:!0,path:"/operator",component:D}),Object(n.jsx)(b.a,{exact:!0,path:"/worker",component:W}),Object(n.jsx)(b.a,{exact:!0,path:"/user",component:F}),Object(n.jsx)(b.a,{exact:!0,path:"/submit-success",component:M})]})})}}]),i}(a.Component),U=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,104)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;i(e),n(e),a(e),r(e),s(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(j.a,{basename:window.location.pathname,children:Object(n.jsx)(z,{})})}),document.getElementById("root")),U()}},[[70,1,2]]]);